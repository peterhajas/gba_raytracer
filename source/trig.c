#include "trig.h"

/*
 Because the GBA is REALLY slow, I've precoumputed sin
 for every degree angle 0-360. This is for speed, but
 it's ugly ugly stuff. cos can be derived from sin.
 */

static float sin_table[360];

void populate_table()
{
	sin_table[0] = 0.0;
	sin_table[1] = 0.0174524064173;
	sin_table[2] = 0.0348994966626;
	sin_table[3] = 0.0523359561832;
	sin_table[4] = 0.0697564736645;
	sin_table[5] = 0.0871557426483;
	sin_table[6] = 0.104528463149;
	sin_table[7] = 0.121869343267;
	sin_table[8] = 0.139173100802;
	sin_table[9] = 0.156434464863;
	sin_table[10] = 0.173648177471;
	sin_table[11] = 0.190808995161;
	sin_table[12] = 0.207911690584;
	sin_table[13] = 0.224951054091;
	sin_table[14] = 0.241921895329;
	sin_table[15] = 0.258819044814;
	sin_table[16] = 0.27563735551;
	sin_table[17] = 0.292371704399;
	sin_table[18] = 0.309016994034;
	sin_table[19] = 0.325568154099;
	sin_table[20] = 0.342020142951;
	sin_table[21] = 0.358367949154;
	sin_table[22] = 0.374606593009;
	sin_table[23] = 0.390731128067;
	sin_table[24] = 0.406736642639;
	sin_table[25] = 0.422618261289;
	sin_table[26] = 0.438371146323;
	sin_table[27] = 0.45399049926;
	sin_table[28] = 0.469471562293;
	sin_table[29] = 0.48480961974;
	sin_table[30] = 0.499999999482;
	sin_table[31] = 0.51503807438;
	sin_table[32] = 0.529919263692;
	sin_table[33] = 0.544639034463;
	sin_table[34] = 0.559192902909;
	sin_table[35] = 0.573576435779;
	sin_table[36] = 0.587785251712;
	sin_table[37] = 0.601815022563;
	sin_table[38] = 0.615661474728;
	sin_table[39] = 0.629320390445;
	sin_table[40] = 0.642787609075;
	sin_table[41] = 0.656059028373;
	sin_table[42] = 0.669130605736;
	sin_table[43] = 0.681998359435;
	sin_table[44] = 0.694658369828;
	sin_table[45] = 0.707106780552;
	sin_table[46] = 0.719339799701;
	sin_table[47] = 0.73135370098;
	sin_table[48] = 0.743144824837;
	sin_table[49] = 0.754709579582;
	sin_table[50] = 0.766044442478;
	sin_table[51] = 0.777145960817;
	sin_table[52] = 0.788010752968;
	sin_table[53] = 0.798635509411;
	sin_table[54] = 0.809016993742;
	sin_table[55] = 0.81915204366;
	sin_table[56] = 0.829037571931;
	sin_table[57] = 0.838670567326;
	sin_table[58] = 0.848048095543;
	sin_table[59] = 0.857167300096;
	sin_table[60] = 0.866025403186;
	sin_table[61] = 0.87461970655;
	sin_table[62] = 0.882947592278;
	sin_table[63] = 0.891006523618;
	sin_table[64] = 0.89879404574;
	sin_table[65] = 0.906307786489;
	sin_table[66] = 0.913545457107;
	sin_table[67] = 0.92050485293;
	sin_table[68] = 0.927183854059;
	sin_table[69] = 0.933580426004;
	sin_table[70] = 0.939692620308;
	sin_table[71] = 0.945518575138;
	sin_table[72] = 0.951056515851;
	sin_table[73] = 0.956304755537;
	sin_table[74] = 0.961261695532;
	sin_table[75] = 0.965925825902;
	sin_table[76] = 0.970295725909;
	sin_table[77] = 0.97437006444;
	sin_table[78] = 0.97814760041;
	sin_table[79] = 0.981627183147;
	sin_table[80] = 0.984807752735;
	sin_table[81] = 0.987688340342;
	sin_table[82] = 0.990268068514;
	sin_table[83] = 0.99254615144;
	sin_table[84] = 0.994521895193;
	sin_table[85] = 0.996194697944;
	sin_table[86] = 0.99756405014;
	sin_table[87] = 0.998629534664;
	sin_table[88] = 0.999390826958;
	sin_table[89] = 0.999847695125;
	sin_table[90] = 1.0;
	sin_table[91] = 0.999847695188;
	sin_table[92] = 0.999390827083;
	sin_table[93] = 0.998629534852;
	sin_table[94] = 0.997564050391;
	sin_table[95] = 0.996194698257;
	sin_table[96] = 0.994521895568;
	sin_table[97] = 0.992546151877;
	sin_table[98] = 0.990268069014;
	sin_table[99] = 0.987688340904;
	sin_table[100] = 0.984807753359;
	sin_table[101] = 0.981627183832;
	sin_table[102] = 0.978147601157;
	sin_table[103] = 0.974370065247;
	sin_table[104] = 0.970295726778;
	sin_table[105] = 0.965925826831;
	sin_table[106] = 0.961261696521;
	sin_table[107] = 0.956304756587;
	sin_table[108] = 0.951056516961;
	sin_table[109] = 0.945518576307;
	sin_table[110] = 0.939692621536;
	sin_table[111] = 0.933580427291;
	sin_table[112] = 0.927183855404;
	sin_table[113] = 0.920504854333;
	sin_table[114] = 0.913545458567;
	sin_table[115] = 0.906307788006;
	sin_table[116] = 0.898794047313;
	sin_table[117] = 0.891006525248;
	sin_table[118] = 0.882947593964;
	sin_table[119] = 0.87461970829;
	sin_table[120] = 0.866025404981;
	sin_table[121] = 0.857167301945;
	sin_table[122] = 0.848048097446;
	sin_table[123] = 0.838670569281;
	sin_table[124] = 0.829037573938;
	sin_table[125] = 0.819152045719;
	sin_table[126] = 0.809016995852;
	sin_table[127] = 0.798635511572;
	sin_table[128] = 0.788010755178;
	sin_table[129] = 0.777145963076;
	sin_table[130] = 0.766044444785;
	sin_table[131] = 0.754709581937;
	sin_table[132] = 0.743144827239;
	sin_table[133] = 0.731353703428;
	sin_table[134] = 0.719339802195;
	sin_table[135] = 0.70710678309;
	sin_table[136] = 0.69465837241;
	sin_table[137] = 0.681998362061;
	sin_table[138] = 0.669130608404;
	sin_table[139] = 0.656059031083;
	sin_table[140] = 0.642787611825;
	sin_table[141] = 0.629320393235;
	sin_table[142] = 0.615661477557;
	sin_table[143] = 0.60181502543;
	sin_table[144] = 0.587785254616;
	sin_table[145] = 0.57357643872;
	sin_table[146] = 0.559192905885;
	sin_table[147] = 0.544639037474;
	sin_table[148] = 0.529919266736;
	sin_table[149] = 0.515038077457;
	sin_table[150] = 0.500000002591;
	sin_table[151] = 0.48480962288;
	sin_table[152] = 0.469471565462;
	sin_table[153] = 0.453990502458;
	sin_table[154] = 0.43837114955;
	sin_table[155] = 0.422618264542;
	sin_table[156] = 0.406736645918;
	sin_table[157] = 0.390731131371;
	sin_table[158] = 0.374606596338;
	sin_table[159] = 0.358367952506;
	sin_table[160] = 0.342020146324;
	sin_table[161] = 0.325568157493;
	sin_table[162] = 0.309016997448;
	sin_table[163] = 0.292371707831;
	sin_table[164] = 0.275637358961;
	sin_table[165] = 0.258819048281;
	sin_table[166] = 0.241921898812;
	sin_table[167] = 0.224951057589;
	sin_table[168] = 0.207911694095;
	sin_table[169] = 0.190808998685;
	sin_table[170] = 0.173648181006;
	sin_table[171] = 0.156434468409;
	sin_table[172] = 0.139173104357;
	sin_table[173] = 0.12186934683;
	sin_table[174] = 0.104528466719;
	sin_table[175] = 0.0871557462245;
	sin_table[176] = 0.0697564772456;
	sin_table[177] = 0.0523359597681;
	sin_table[178] = 0.0348995002502;
	sin_table[179] = 0.0174524100066;
	sin_table[180] = 3.58979347393e-09;
	sin_table[181] = -0.0174524028281;
	sin_table[182] = -0.034899493075;
	sin_table[183] = -0.0523359525983;
	sin_table[184] = -0.0697564700835;
	sin_table[185] = -0.0871557390722;
	sin_table[186] = -0.104528459579;
	sin_table[187] = -0.121869339704;
	sin_table[188] = -0.139173097247;
	sin_table[189] = -0.156434461317;
	sin_table[190] = -0.173648173935;
	sin_table[191] = -0.190808991637;
	sin_table[192] = -0.207911687072;
	sin_table[193] = -0.224951050593;
	sin_table[194] = -0.241921891846;
	sin_table[195] = -0.258819041346;
	sin_table[196] = -0.27563735206;
	sin_table[197] = -0.292371700966;
	sin_table[198] = -0.309016990619;
	sin_table[199] = -0.325568150705;
	sin_table[200] = -0.342020139578;
	sin_table[201] = -0.358367945803;
	sin_table[202] = -0.374606589681;
	sin_table[203] = -0.390731124763;
	sin_table[204] = -0.406736639359;
	sin_table[205] = -0.422618258035;
	sin_table[206] = -0.438371143097;
	sin_table[207] = -0.453990496061;
	sin_table[208] = -0.469471559123;
	sin_table[209] = -0.484809616601;
	sin_table[210] = -0.499999996373;
	sin_table[211] = -0.515038071303;
	sin_table[212] = -0.529919260648;
	sin_table[213] = -0.544639031452;
	sin_table[214] = -0.559192899933;
	sin_table[215] = -0.573576432839;
	sin_table[216] = -0.587785248807;
	sin_table[217] = -0.601815019696;
	sin_table[218] = -0.6156614719;
	sin_table[219] = -0.629320387656;
	sin_table[220] = -0.642787606325;
	sin_table[221] = -0.656059025664;
	sin_table[222] = -0.669130603069;
	sin_table[223] = -0.68199835681;
	sin_table[224] = -0.694658367245;
	sin_table[225] = -0.707106778014;
	sin_table[226] = -0.719339797208;
	sin_table[227] = -0.731353698532;
	sin_table[228] = -0.743144822435;
	sin_table[229] = -0.754709577227;
	sin_table[230] = -0.766044440171;
	sin_table[231] = -0.777145958558;
	sin_table[232] = -0.788010750758;
	sin_table[233] = -0.798635507251;
	sin_table[234] = -0.809016991632;
	sin_table[235] = -0.819152041601;
	sin_table[236] = -0.829037569923;
	sin_table[237] = -0.838670565371;
	sin_table[238] = -0.848048093641;
	sin_table[239] = -0.857167298247;
	sin_table[240] = -0.866025401391;
	sin_table[241] = -0.874619704809;
	sin_table[242] = -0.882947590593;
	sin_table[243] = -0.891006521988;
	sin_table[244] = -0.898794044166;
	sin_table[245] = -0.906307784972;
	sin_table[246] = -0.913545455647;
	sin_table[247] = -0.920504851528;
	sin_table[248] = -0.927183852714;
	sin_table[249] = -0.933580424718;
	sin_table[250] = -0.939692619081;
	sin_table[251] = -0.94551857397;
	sin_table[252] = -0.951056514742;
	sin_table[253] = -0.956304754488;
	sin_table[254] = -0.961261694542;
	sin_table[255] = -0.965925824973;
	sin_table[256] = -0.970295725041;
	sin_table[257] = -0.974370063632;
	sin_table[258] = -0.978147599664;
	sin_table[259] = -0.981627182462;
	sin_table[260] = -0.984807752112;
	sin_table[261] = -0.987688339781;
	sin_table[262] = -0.990268068014;
	sin_table[263] = -0.992546151002;
	sin_table[264] = -0.994521894818;
	sin_table[265] = -0.996194697631;
	sin_table[266] = -0.99756404989;
	sin_table[267] = -0.998629534476;
	sin_table[268] = -0.999390826833;
	sin_table[269] = -0.999847695063;
	sin_table[270] = -1.0;
	sin_table[271] = -0.999847695251;
	sin_table[272] = -0.999390827208;
	sin_table[273] = -0.99862953504;
	sin_table[274] = -0.997564050641;
	sin_table[275] = -0.99619469857;
	sin_table[276] = -0.994521895944;
	sin_table[277] = -0.992546152315;
	sin_table[278] = -0.990268069513;
	sin_table[279] = -0.987688341466;
	sin_table[280] = -0.984807753982;
	sin_table[281] = -0.981627184517;
	sin_table[282] = -0.978147601903;
	sin_table[283] = -0.974370066055;
	sin_table[284] = -0.970295727646;
	sin_table[285] = -0.96592582776;
	sin_table[286] = -0.96126169751;
	sin_table[287] = -0.956304757636;
	sin_table[288] = -0.95105651807;
	sin_table[289] = -0.945518577476;
	sin_table[290] = -0.939692622764;
	sin_table[291] = -0.933580428577;
	sin_table[292] = -0.927183856748;
	sin_table[293] = -0.920504855736;
	sin_table[294] = -0.913545460027;
	sin_table[295] = -0.906307789523;
	sin_table[296] = -0.898794048887;
	sin_table[297] = -0.891006526877;
	sin_table[298] = -0.882947595649;
	sin_table[299] = -0.87461971003;
	sin_table[300] = -0.866025406776;
	sin_table[301] = -0.857167303794;
	sin_table[302] = -0.848048099348;
	sin_table[303] = -0.838670571237;
	sin_table[304] = -0.829037575945;
	sin_table[305] = -0.819152047778;
	sin_table[306] = -0.809016997962;
	sin_table[307] = -0.798635513732;
	sin_table[308] = -0.788010757388;
	sin_table[309] = -0.777145965335;
	sin_table[310] = -0.766044447093;
	sin_table[311] = -0.754709584292;
	sin_table[312] = -0.743144829641;
	sin_table[313] = -0.731353705876;
	sin_table[314] = -0.719339804689;
	sin_table[315] = -0.707106785629;
	sin_table[316] = -0.694658374992;
	sin_table[317] = -0.681998364686;
	sin_table[318] = -0.669130611072;
	sin_table[319] = -0.656059033792;
	sin_table[320] = -0.642787614575;
	sin_table[321] = -0.629320396025;
	sin_table[322] = -0.615661480386;
	sin_table[323] = -0.601815028297;
	sin_table[324] = -0.58778525752;
	sin_table[325] = -0.57357644166;
	sin_table[326] = -0.559192908861;
	sin_table[327] = -0.544639040484;
	sin_table[328] = -0.529919269781;
	sin_table[329] = -0.515038080534;
	sin_table[330] = -0.5000000057;
	sin_table[331] = -0.48480962602;
	sin_table[332] = -0.469471568632;
	sin_table[333] = -0.453990505657;
	sin_table[334] = -0.438371152776;
	sin_table[335] = -0.422618267796;
	sin_table[336] = -0.406736649197;
	sin_table[337] = -0.390731134676;
	sin_table[338] = -0.374606599666;
	sin_table[339] = -0.358367955857;
	sin_table[340] = -0.342020149697;
	sin_table[341] = -0.325568160887;
	sin_table[342] = -0.309017000862;
	sin_table[343] = -0.292371711264;
	sin_table[344] = -0.275637362412;
	sin_table[345] = -0.258819051749;
	sin_table[346] = -0.241921902295;
	sin_table[347] = -0.224951061087;
	sin_table[348] = -0.207911697606;
	sin_table[349] = -0.190809002209;
	sin_table[350] = -0.173648184541;
	sin_table[351] = -0.156434471954;
	sin_table[352] = -0.139173107912;
	sin_table[353] = -0.121869350393;
	sin_table[354] = -0.104528470289;
	sin_table[355] = -0.0871557498006;
	sin_table[356] = -0.0697564808266;
	sin_table[357] = -0.0523359633529;
	sin_table[358] = -0.0348995038379;
	sin_table[359] = -0.0174524135958;
}

float degrees_in_radians(float degrees)
{
	return degrees * 0.0174532925;
}

float radians_in_degrees(float radians)
{
	return radians / 0.0174532925;
}

float fast_sin(float radians)
{
	int degrees = (int)radians_in_degrees(radians) % 360;
	return sin_table[degrees];
}

float fast_cos(float radians)
{
	return fast_sin(M_PI_OVER_2 - radians);
}